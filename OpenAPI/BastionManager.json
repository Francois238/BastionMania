{
  "openapi": "3.1.0",
  "x-stoplight": {
    "id": "5rtjmrxf7j4ik"
  },
  "info": {
    "title": "BastionManager",
    "version": "1.0"
  },
  "servers": [
    {
      "url": "http://localhost:3000"
    }
  ],
  "paths": {
    "/bastions": {
      "get": {
        "summary": "Your GET endpoint",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "x-examples": {
                    "example-1": {
                      "success": true,
                      "message": "liste bastions",
                      "data": "bastions"
                    }
                  },
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Bastion"
                    }
                  }
                },
                "examples": {
                  "example-1": {
                    "value": {
                      "success": true,
                      "message": "liste bastions",
                      "data": "bastions"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "operationId": "get-bastion",
        "parameters": [],
        "description": "affiche la liste complète/d'appartenance selon si l'on est admin/user"
      },
      "post": {
        "summary": "",
        "operationId": "post-bastion",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "string"
                    }
                  },
                  "x-examples": {
                    "example-1": {
                      "success": true,
                      "message": "bastion créé",
                      "data": "ok"
                    }
                  }
                },
                "examples": {
                  "example-1": {
                    "value": {
                      "success": true,
                      "message": "bastion créé",
                      "data": "ok"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {}
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BastionModification"
              }
            }
          },
          "description": ""
        },
        "parameters": [],
        "description": "création d'un bastion"
      },
      "parameters": []
    },
    "/bastions/{bastion_id}": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "bastion_id",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "Your GET endpoint",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Bastion"
                },
                "examples": {
                  "example-1": {}
                }
              },
              "application/xml": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Bastion"
                    }
                  }
                },
                "examples": {}
              },
              "multipart/form-data": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Bastion"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "operationId": "get-bastion-bastion_id",
        "parameters": [],
        "description": "affiche le bastion d'id {bastion_id}",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {}
              }
            },
            "application/xml": {
              "schema": {
                "type": "object",
                "properties": {
                  "bastion_id": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "",
        "operationId": "delete-bastion-bastion_id",
        "responses": {
          "200": {
            "description": "\"supprimé\"",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "string"
                    }
                  }
                },
                "examples": {
                  "example-1": {
                    "value": {
                      "success": true,
                      "message": "bastion supprimé",
                      "data": "supprimé"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "parameters": [],
        "description": "supprime le bastion"
      }
    },
    "/bastions/{bastion_id}/ressources/{ressource_id}": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "bastion_id",
          "in": "path",
          "required": true
        },
        {
          "schema": {
            "type": "string"
          },
          "name": "ressource_id",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "Your GET endpoint",
        "tags": [],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Ressource"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "operationId": "get-bastions-bastion_id-ressources-ressource_id",
        "description": "affiche une ressource",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "donnees": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "",
        "operationId": "delete-bastions-bastion_id-ressources-ressource_id",
        "responses": {
          "200": {
            "description": "supprimé",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "description": "enlève la ressource en bdd",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "donnees": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/bastions/{bastion_id}/ressources": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "bastion_id",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "Your GET endpoint",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Ressource"
                }
              },
              "application/xml": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Ressource"
                    }
                  }
                }
              },
              "multipart/form-data": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Ressource"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Ressource"
                    }
                  }
                }
              }
            }
          }
        },
        "operationId": "get-bastions-bastion_id-ressources",
        "description": "affiches l'ensemble des ressources accessible par le bastion",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "bastion_id": {
                    "type": "string"
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "",
        "operationId": "delete-bastions-bastion_id-ressources",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "bastion_id": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "description": "efface la ressource en bdd, envoie une demande d'arret de chaque session et efface les config user associées"
      }
    },
    "/bastions/{bastion_id}/ressources/create/ssh": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "bastion_id",
          "in": "path",
          "required": true
        }
      ],
      "post": {
        "summary": "",
        "operationId": "post-bastions-bastion_id-ressources-create-ssh",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Ressource"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "donnees": {
                    "type": "string"
                  },
                  "ressource_data": {
                    "$ref": "#/components/schemas/RessourceSshCreation"
                  }
                }
              }
            }
          }
        },
        "description": "crée les données pour la ressource ssh et l'envoie au bastion, puis demande l'ip à contacter à l'agent"
      }
    },
    "/bastions/{bastion_id}/ressources/create/wireguard": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "bastion_id",
          "in": "path",
          "required": true
        }
      ],
      "post": {
        "summary": "",
        "operationId": "post-bastions-bastion_id-ressources-create-wireguard",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Ressource"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "donnees": {
                    "type": "string"
                  },
                  "ressource_data": {
                    "$ref": "#/components/schemas/RessourceWireguardCreation"
                  }
                }
              }
            }
          }
        },
        "description": "crée les données pour la ressource wireguard en local, mais pas de communication avec les autres API"
      }
    },
    "/bastions/{bastion_id}/ressources/{ressource_id}/getressourcecredentials/ssh": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "bastion_id",
          "in": "path",
          "required": true
        },
        {
          "schema": {
            "type": "string"
          },
          "name": "ressource_id",
          "in": "path",
          "required": true
        }
      ],
      "post": {
        "summary": "",
        "operationId": "post-bastions-bastion_id-ressources-ressource_id-getressourcecredentials-ssh",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/UserConfigSshInsertable"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request"
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "donnees": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "sshdata": {
                    "$ref": "#/components/schemas/RessourceCredentialsSsh"
                  }
                }
              }
            }
          }
        },
        "description": "crée les droits d'accès de l'utilisateur à la ressource ssh"
      }
    },
    "/bastions/{bastion_id}/ressources/{ressource_id}/getressourcecredentials/wireguard": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "bastion_id",
          "in": "path",
          "required": true
        },
        {
          "schema": {
            "type": "string"
          },
          "name": "ressource_id",
          "in": "path",
          "required": true
        }
      ],
      "post": {
        "summary": "",
        "operationId": "post-bastions-bastion_id-ressources-ressource_id-getressourcecredentials-wireguard",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/UserConfigWireguardInsertable"
                    }
                  }
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "donnees": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "wireguarddata": {
                    "$ref": "#/components/schemas/RessourceCredentialsWireguard"
                  }
                }
              }
            }
          }
        },
        "description": "crée les droits d'accès à la ressource wireguard"
      }
    },
    "/bastions/{bastion_id}/ressources/{ressource_id}/users": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "bastion_id",
          "in": "path",
          "required": true
        },
        {
          "schema": {
            "type": "string"
          },
          "name": "ressource_id",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "Your GET endpoint",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Users"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "operationId": "get-bastions-bastion_id-ressources-ressource_id-users",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "donnees": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "description": "affiche tous les utilisateur du bastion"
      },
      "post": {
        "summary": "",
        "operationId": "post-bastions-bastion_id-ressources-ressource_id-users",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "donnees": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "user": {
                    "$ref": "#/components/schemas/UsersCreation"
                  }
                }
              }
            }
          },
          "description": ""
        },
        "description": "crée un nouvel utilisateur "
      },
      "delete": {
        "summary": "",
        "operationId": "delete-bastions-bastion_id-ressources-ressource_id-users",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "donnees": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "description": "supprime tous les utilisateurs, arrête leur session et efface leur config "
      }
    },
    "/bastions/{bastion_id}/ressources/{ressource_id}/users/{user_id}": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "bastion_id",
          "in": "path",
          "required": true
        },
        {
          "schema": {
            "type": "string"
          },
          "name": "ressource_id",
          "in": "path",
          "required": true
        },
        {
          "schema": {
            "type": "string"
          },
          "name": "user_id",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "Your GET endpoint",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "$ref": "#/components/schemas/Users"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "operationId": "get-bastions-bastion_id-ressources-ressource_id-users-user_id",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "donnees": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "description": "affiche un user"
      },
      "delete": {
        "summary": "",
        "operationId": "delete-bastions-bastion_id-ressources-ressource_id-users-user_id",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "donnees": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "description": "supprime tous les utilisateur, arrête leur session et efface leur config "
      }
    },
    "/agent": {
      "get": {
        "summary": "Your GET endpoint",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "bastion_public_key": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "operationId": "get-agent",
        "description": "",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AgentAskPairInfo"
              }
            }
          }
        },
        "parameters": []
      }
    },
    "/bastions/{bastion_id}/ressources/{ressource_id}/startsession": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "bastion_id",
          "in": "path",
          "required": true
        },
        {
          "schema": {
            "type": "string"
          },
          "name": "ressource_id",
          "in": "path",
          "required": true
        }
      ],
      "post": {
        "summary": "",
        "operationId": "post-bastions-bastion_id-ressources-ressource_id-startsession",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "description": "envoie la requête de création de session au bastion",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "donnees": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/bastions/{bastion_id}/ressources/{ressource_id}/stopsession": {
      "parameters": [
        {
          "schema": {
            "type": "string"
          },
          "name": "bastion_id",
          "in": "path",
          "required": true
        },
        {
          "schema": {
            "type": "string"
          },
          "name": "ressource_id",
          "in": "path",
          "required": true
        }
      ],
      "post": {
        "summary": "",
        "operationId": "post-bastions-bastion_id-ressources-ressource_id-stopsession",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "message": {
                      "type": "string"
                    },
                    "data": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized"
          },
          "403": {
            "description": "Forbidden"
          },
          "404": {
            "description": "Not Found"
          },
          "500": {
            "description": "Internal Server Error"
          }
        },
        "description": "envoie la requête d'arrêt de session au bastion",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "donnees": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Bastion": {
        "title": "Bastion",
        "x-stoplight": {
          "id": "tddw6lrvd6ztr"
        },
        "type": "object",
        "properties": {
          "bastion_id": {
            "type": "string",
            "description": "uuid"
          },
          "name": {
            "type": "string",
            "description": "pour affichage en front"
          },
          "subnet_cidr": {
            "type": "string"
          },
          "ssh_port": {
            "type": "string",
            "description": "attibution dynamique"
          },
          "wireguard_port": {
            "type": "string",
            "description": "attribution dynamique"
          },
          "net_id": {
            "type": "integer",
            "description": "pour définir son sous réseau"
          }
        },
        "required": [
          "bastion_id",
          "name",
          "subnet_cidr",
          "ssh_port",
          "wireguard_port",
          "net_id"
        ]
      },
      "Users": {
        "title": "User",
        "x-stoplight": {
          "id": "e6423xqu0qwe5"
        },
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "généré automatiquement en bdd"
          },
          "user_id": {
            "type": "string",
            "description": "uuid"
          },
          "ressource_id": {
            "type": "string",
            "description": "uuid"
          },
          "net_id": {
            "type": "integer",
            "description": "permet de contruire l'ip du user en le combinant avec le net_id bastion"
          }
        },
        "required": [
          "user_id",
          "ressource_id",
          "net_id"
        ]
      },
      "BastionModification": {
        "title": "BastionModification",
        "x-stoplight": {
          "id": "v5012yxuuz7ey"
        },
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "subnet_cidr": {
            "type": "string"
          },
          "agent_endpoint": {
            "type": "string"
          }
        },
        "required": [
          "name",
          "subnet_cidr",
          "agent_endpoint"
        ]
      },
      "UserModification": {
        "title": "UserModification",
        "x-stoplight": {
          "id": "e5ckopu2vd3q9"
        },
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          }
        }
      },
      "Ressource": {
        "title": "Ressource",
        "x-stoplight": {
          "id": "d0bmhpfa1r0ur"
        },
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "uuid"
          },
          "id_bastion": {
            "type": "string",
            "description": "uuid"
          },
          "name": {
            "type": "string",
            "description": "pour le front"
          },
          "rtype": {
            "type": "string",
            "description": "\"wireguard\" ou \"ssh\" qui doivent être rentré exactement   "
          },
          "id_wireguard": {
            "type": "string",
            "description": "attribué en fonction des autres ressources du même type"
          },
          "id_ssh": {
            "type": "string",
            "description": "attribué en fonction des autres ressources du même type"
          },
          "id_k8s": {
            "type": "string",
            "description": "attribué en fonction des autres ressources du même type"
          }
        }
      },
      "WireguardRessource": {
        "title": "WireguardSession",
        "x-stoplight": {
          "id": "zje9fgakvkvo6"
        },
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "id_bastion": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "target_ip": {
            "type": "string"
          }
        }
      },
      "SSHRessource": {
        "title": "SSHSession",
        "x-stoplight": {
          "id": "iv8pont40w0et"
        },
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "id_bastion": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "ip_machine": {
            "type": "string"
          },
          "port": {
            "type": "integer"
          }
        }
      },
      "K8SRessource": {
        "title": "K8SRessource",
        "x-stoplight": {
          "id": "2lxax15vi5fyu"
        },
        "type": "object",
        "properties": {
          "id": {
            "type": "integer"
          },
          "id_bastion": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "ip_cluster": {
            "type": "string"
          }
        }
      },
      "AgentAskPairInfo": {
        "title": "AgentAskPairInfo",
        "x-stoplight": {
          "id": "8kz5yb1nfcxyc"
        },
        "type": "object",
        "properties": {
          "token": {
            "type": "string"
          },
          "public_key": {
            "type": "string"
          },
          "agent_host": {
            "type": "string"
          }
        }
      },
      "RessourceWireguardCreation": {
        "title": "RessourceWireguardCreation",
        "x-stoplight": {
          "id": "jj9z6ulnh7647"
        },
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "rtype": {
            "type": "string"
          },
          "target_ip": {
            "type": "string"
          }
        }
      },
      "RessourceSshCreation": {
        "title": "RessourceSshCreation",
        "x-stoplight": {
          "id": "30myo59v6e2hy"
        },
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "rtype": {
            "type": "string"
          },
          "ip_machine": {
            "type": "string"
          },
          "port": {
            "type": "string"
          }
        }
      },
      "RessourceCredentialsSsh": {
        "title": "RessourceCredentialsSsh",
        "x-stoplight": {
          "id": "2ur5pqzps49ia"
        },
        "type": "object",
        "properties": {
          "pubkey": {
            "type": "string"
          },
          "username": {
            "type": "string"
          }
        }
      },
      "UserConfigSshInsertable": {
        "title": "UserConfigSshInsertable",
        "x-stoplight": {
          "id": "qkavi1tew00bc"
        },
        "type": "object",
        "properties": {
          "uuid_user": {
            "type": "string"
          },
          "uuid_ressource": {
            "type": "string"
          },
          "pubkey": {
            "type": "string"
          },
          "username": {
            "type": "string"
          }
        }
      },
      "RessourceCredentialsWireguard": {
        "title": "RessourceCredentialsWireguard",
        "x-stoplight": {
          "id": "2oq4j9jlmjzzx"
        },
        "type": "object",
        "properties": {
          "pubkey": {
            "type": "string"
          },
          "user_net_id": {
            "type": "integer"
          }
        }
      },
      "UserConfigWireguardInsertable": {
        "title": "UserConfigWireguardInsertable",
        "x-stoplight": {
          "id": "0ekl9gxcl42gu"
        },
        "type": "object",
        "properties": {
          "uuid_user": {
            "type": "string"
          },
          "uuid_ressource": {
            "type": "string"
          },
          "pubkey": {
            "type": "string"
          },
          "user_net_id": {
            "type": "string"
          }
        }
      },
      "UsersCreation": {
        "title": "UsersCreation",
        "x-stoplight": {
          "id": "n1c4vs7mtc24t"
        },
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "ressource_id": {
            "type": "string"
          }
        }
      }
    },
    "securitySchemes": {}
  }
}